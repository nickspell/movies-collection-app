{"version":3,"sources":["../../../src/components/LanguageMenu.js"],"names":["React","withStyles","Manager","Target","Popper","Button","ClickAwayListener","Collapse","Paper","Portal","MenuItem","MenuList","classNames","FlagIcon","languages","styles","theme","root","display","paper","marginRight","spacing","unit","popperClose","pointerEvents","LanguageMenu","Component","state","open","handleToggle","setState","handleClose","event","target","contains","render","classes","activeLanguage","props","size","console","log","node","transformOrigin","margin","key"],"mappings":"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","file":"LanguageMenu.js","sourcesContent":["// @flow\nimport React from \"react\"\nimport { withStyles } from '@material-ui/core/styles';\nimport { Manager, Target, Popper } from 'react-popper';\nimport Button from '@material-ui/core/Button';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Collapse from '@material-ui/core/Collapse';\nimport Paper from '@material-ui/core/Paper';\nimport Portal from '@material-ui/core/Portal';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport classNames from 'classnames';\nimport FlagIcon from \"./FlagIcon\";\nimport languages from '../localization/languages'\n\n\ntype Classes={\n    root:{\n        display:string\n    },\n    paper:{\n        marginRight: number\n    },\n    popperClose:any\n}\n\ntype Props={\n    classes:Classes,\n    activeLanguage: string\n};\n\ntype State={\n    open: boolean\n};\n\nconst styles = theme => ({\n    root: {\n        display: 'flex',\n    },\n    paper: {\n        marginRight: theme.spacing.unit * 2,\n    },\n    popperClose: {\n        pointerEvents: 'none',\n    },\n});\n\n\n//TODO add dispatch to languageselect action\nclass LanguageMenu extends React.Component<Props,State>{\n    state={\n        open:false\n    };\n\n    target: any;\n\n    handleToggle = () => {\n        this.setState({ open: !this.state.open });\n    };\n\n    handleClose = (event:any) => {\n        if (this.target.contains(event.target)) {\n            return;\n        }\n\n        this.setState({ open: false });\n    };\n\n    render(){\n        const {classes,activeLanguage}=this.props;\n        const {open}=this.state;\n        const size='lg';\n\n        console.log(typeof this.target);\n        return(\n            <div className={classes.root}>\n                <Manager>\n                    <Target>\n                        <div\n                            ref={node => {\n                                this.target = node;\n                            }}\n                        >\n                            <Button\n                                aria-owns={open ? 'menu-list-collapse' : null}\n                                aria-haspopup=\"true\"\n                                onClick={this.handleToggle}\n                            >\n                                <FlagIcon code={activeLanguage} size={size} />\n                            </Button>\n                        </div>\n                    </Target>\n                    <Portal>\n                        <Popper\n                            placement=\"bottom\"\n                            eventsEnabled={open}\n                            className={classNames({ [classes.popperClose]: !open })}\n                        >\n                            <ClickAwayListener onClickAway={this.handleClose}>\n                                <Collapse in={open} id=\"menu-list-collapse\" style={{ transformOrigin: '0 0 0' }}>\n                                    <Paper style={{ margin: 3 }}>\n                                        <MenuList role=\"menu\">\n                                            Object.keys(languages).forEach((key: string,language : )=> {\n                                            <MenuItem onClick={this.handleClose}>\n                                                <FlagIcon code={key} size={size} /> <span>Ciao</span>\n                                            </MenuItem>\n                                        });\n                                        </MenuList>\n                                    </Paper>\n                                </Collapse>\n                            </ClickAwayListener>\n                        </Popper>\n                    </Portal>\n                </Manager>\n            </div>\n        )\n    }\n\n}\n\nexport default withStyles(styles)(LanguageMenu);"]}